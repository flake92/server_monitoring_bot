Telegram Server Monitoring Bot üöÄ
  
üìñ –û–ø–∏—Å–∞–Ω–∏–µ
Telegram Server Monitoring Bot ‚Äî —ç—Ç–æ –º–æ–¥—É–ª—å–Ω—ã–π Telegram –±–æ—Ç, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤ –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º ICMP, HTTP –∏ HTTPS. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å, —É–¥–∞–ª—è—Ç—å –∏ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–≤–æ–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–ø–∏—Å–∫–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤ –ø–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º. –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π —Å–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤, –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç –¥—Ä—É–≥–∏—Ö. –ë–æ—Ç –≤–∫–ª—é—á–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å 20-—Å–µ–∫—É–Ω–¥–Ω—ã–º –ø–µ—Ä–∏–æ–¥–æ–º –æ—Ö–ª–∞–∂–¥–µ–Ω–∏—è –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ª–æ–∂–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–π –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏. –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ PostgreSQL, –∞ –ø—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ Python —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ aiogram.

‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
üë§ –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è: –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞—è–≤–∫–∏ –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É /start.
–ú–æ–¥–µ—Ä–∞—Ü–∏—è: –í—Å–µ –Ω–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º.
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞–º–∏ (–ø–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è):
–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–≤ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –Ω–∞–∑–≤–∞–Ω–∏—è, –∞–¥—Ä–µ—Å–∞ –∏ —Ç–∏–ø–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ (ICMP, HTTP, HTTPS).
–ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏—è.
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é.


–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: –°–æ–æ–±—â–µ–Ω–∏—è –æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤, –≤–∫–ª—é—á–∞—é—â–∏–µ:
–ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞
–ê–¥—Ä–µ—Å
–í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
–í—Ä–µ–º—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è


–ü–µ—Ä–∏–æ–¥ –æ—Ö–ª–∞–∂–¥–µ–Ω–∏—è: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –±–æ–ª–µ–µ 20 —Å–µ–∫—É–Ω–¥.

üëë –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: –î–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É /admin –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤.
–ú–æ–¥–µ—Ä–∞—Ü–∏—è: –û–¥–æ–±—Ä–µ–Ω–∏–µ –∏–ª–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –æ–¥–æ–±—Ä–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤.
–û—á–∏—Å—Ç–∫–∞ –æ—á–µ—Ä–µ–¥–∏: –°–±—Ä–æ—Å –Ω–µ–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.

üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤ (–∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É).
–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤: ICMP (ping), HTTP, HTTPS.
–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–±–æ—è—Ö —Å —É—á–µ—Ç–æ–º –ø–µ—Ä–∏–æ–¥–∞ –æ—Ö–ª–∞–∂–¥–µ–Ω–∏—è.

üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è PostgreSQL –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è:
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (ID, –∏–º—è, —Å—Ç–∞—Ç—É—Å)
–°–µ—Ä–≤–µ—Ä–æ–≤ (–ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º)
–°—Ç–∞—Ç—É—Å–æ–≤ —Å–µ—Ä–≤–µ—Ä–æ–≤ (–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å, –≤—Ä–µ–º—è)
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (—Å–æ–æ–±—â–µ–Ω–∏—è, —Å—Ç–∞—Ç—É—Å)


–ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤.


üõ†Ô∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è



–ö–æ–º–ø–æ–Ω–µ–Ω—Ç
–í–µ—Ä—Å–∏—è/–û–ø–∏—Å–∞–Ω–∏–µ



–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
Linux (Ubuntu 20.04/22.04)


Python
3.9 –∏–ª–∏ –≤—ã—à–µ


PostgreSQL
14 –∏–ª–∏ –≤—ã—à–µ


Telegram Bot Token
–ü–æ–ª—É—á–µ–Ω–Ω—ã–π —á–µ—Ä–µ–∑ @BotFather


–ò–Ω—Ç–µ—Ä–Ω–µ—Ç
–î–ª—è Telegram API –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤



üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
server_monitoring_bot/
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ config.py           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–æ—Ç–∞ (—Ç–æ–∫–µ–Ω, –ë–î)
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ models.py          # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ db_manager.py      # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ PostgreSQL
‚îÇ   ‚îî‚îÄ‚îÄ schema.sql         # –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ user_handlers.py   # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã
‚îÇ   ‚îú‚îÄ‚îÄ admin_handlers.py  # –ê–¥–º–∏–Ω—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã
‚îÇ   ‚îî‚îÄ‚îÄ monitoring_handlers.py  # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ä–≤–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ monitoring.py      # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ notification.py    # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ cooldown.py        # –ü–µ—Ä–∏–æ–¥ –æ—Ö–ª–∞–∂–¥–µ–Ω–∏—è
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ logger.py          # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ requirements.txt        # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ main.py                 # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îî‚îÄ‚îÄ README.md               # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è


üêß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –Ω–∞ Linux (Ubuntu)
–°–ª–µ–¥—É–π—Ç–µ —ç—Ç–∏–º —à–∞–≥–∞–º –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ Ubuntu 20.04/22.04.
1Ô∏è‚É£ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
–û–±–Ω–æ–≤–∏—Ç–µ –ø–∞–∫–µ—Ç—ã —Å–∏—Å—Ç–µ–º—ã:
sudo apt update && sudo apt upgrade -y

2Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Python 3.9+ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω:
python3 --version

–ï—Å–ª–∏ Python –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –≤–µ—Ä—Å–∏—è –Ω–∏–∂–µ, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:
sudo apt install python3.9 python3-pip python3-venv -y

3Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PostgreSQL 14:

sudo apt install postgresql postgresql-contrib -y


–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–ª—É–∂–±—ã:

sudo systemctl status postgresql

–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ, –µ—Å–ª–∏ –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞:
sudo systemctl start postgresql
sudo systemctl enable postgresql


–°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

sudo -u postgres psql

–í psql –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
CREATE DATABASE server_monitoring;
CREATE USER monitor_user WITH PASSWORD 'secure_password';
ALTER ROLE monitor_user SET client_encoding TO 'utf8';
ALTER ROLE monitor_user SET default_transaction_isolation TO 'read committed';
ALTER ROLE monitor_user SET timezone TO 'UTC';
GRANT ALL PRIVILEGES ON DATABASE server_monitoring TO monitor_user;
\q

–ó–∞–º–µ–Ω–∏—Ç–µ secure_password –Ω–∞ –Ω–∞–¥–µ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å.
4Ô∏è‚É£ –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Git:

sudo apt install git -y


–°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª—ã –≤—Ä—É—á–Ω—É—é):

git clone <repository_url> server_monitoring_bot
cd server_monitoring_bot

5Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:

python3 -m venv venv
source venv/bin/activate


–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

pip install -r requirements.txt

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ requirements.txt:
aiogram==2.25.1
psycopg2-binary==2.9.9
python-dotenv==1.0.0
aiohttp==3.9.1
ping3==4.0.3

6Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env:

nano .env

–î–æ–±–∞–≤—å—Ç–µ:
BOT_TOKEN=your_bot_token_here
DB_HOST=localhost
DB_PORT=5432
DB_NAME=server_monitoring
DB_USER=monitor_user
DB_PASSWORD=secure_password
ADMIN_IDS=123456789,987654321


BOT_TOKEN: –ü–æ–ª—É—á–∏—Ç–µ —É @BotFather.
DB_PASSWORD: –ü–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è PostgreSQL.
ADMIN_IDS: Telegram ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ (—É–∑–Ω–∞—Ç—å —á–µ—Ä–µ–∑ @userinfobot).

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏ –∑–∞–∫—Ä–æ–π—Ç–µ (Ctrl+O, Enter, Ctrl+X).

–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø:

chmod 600 .env

7Ô∏è‚É£ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
–ü—Ä–∏–º–µ–Ω–∏—Ç–µ —Å—Ö–µ–º—É:
psql -U monitor_user -d server_monitoring -f database/schema.sql

–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å monitor_user.
8Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–µ:

config/config.py
database/models.py, db_manager.py, schema.sql
handlers/user_handlers.py, admin_handlers.py, monitoring_handlers.py
services/monitoring.py, notification.py, cooldown.py
utils/logger.py
main.py

9Ô∏è‚É£ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:

source venv/bin/activate


–ó–∞–ø—É—Å—Ç–∏—Ç–µ:

python main.py

–õ–æ–≥–∏ –±—É–¥—É—Ç –≤ bot.log –∏ –∫–æ–Ω—Å–æ–ª–∏.
üîü –§–æ–Ω–æ–≤–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
–î–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ systemd –∏–ª–∏ screen.
Systemd

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª —Å–ª—É–∂–±—ã:

sudo nano /etc/systemd/system/telegram-bot.service

–î–æ–±–∞–≤—å—Ç–µ:
[Unit]
Description=Telegram Server Monitoring Bot
After=network.target

[Service]
User=<your_username>
WorkingDirectory=/path/to/server_monitoring_bot
ExecStart=/path/to/server_monitoring_bot/venv/bin/python main.py
Restart=always

[Install]
WantedBy=multi-user.target

–ó–∞–º–µ–Ω–∏—Ç–µ <your_username> –∏ /path/to/server_monitoring_bot.

–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ:

sudo systemctl daemon-reload
sudo systemctl start telegram-bot
sudo systemctl enable telegram-bot


–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:

sudo systemctl status telegram-bot

Screen

–ó–∞–ø—É—Å—Ç–∏—Ç–µ screen:

screen -S bot


–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:

source venv/bin/activate
python main.py


–û—Ç—Å–æ–µ–¥–∏–Ω–∏—Ç–µ—Å—å: Ctrl+A, D.
–í–µ—Ä–Ω—É—Ç—å—Å—è: screen -r bot.


üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

–ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ –≤ Telegram.
–û—Ç–ø—Ä–∞–≤—å—Ç–µ /start –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.
–ü–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è:
–î–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä: –£–∫–∞–∂–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ, –∞–¥—Ä–µ—Å, —Ç–∏–ø –ø—Ä–æ–≤–µ—Ä–∫–∏.
–ú–æ–∏ —Å–µ—Ä–≤–µ—Ä–∞: –ü—Ä–æ—Å–º–æ—Ç—Ä, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ.
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å: –¢–µ–∫—É—â–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–æ–≤.


–ü–æ–ª—É—á–∞–π—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–±–æ—è—Ö/–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏.

üëë –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã

–û—Ç–ø—Ä–∞–≤—å—Ç–µ /admin.
–§—É–Ω–∫—Ü–∏–∏:
–ú–æ–¥–µ—Ä–∞—Ü–∏—è –∑–∞—è–≤–æ–∫.
–ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Å–µ—Ä–≤–µ—Ä–æ–≤.
–û—á–∏—Å—Ç–∫–∞ –æ—á–µ—Ä–µ–¥–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.




üìú –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–õ–æ–≥–∏ –≤ bot.log –∏ –∫–æ–Ω—Å–æ–ª–∏.
–§–æ—Ä–º–∞—Ç: –≤—Ä–µ–º—è, —É—Ä–æ–≤–µ–Ω—å, —Å–æ–æ–±—â–µ–Ω–∏–µ.
–ü—Ä–æ—Å–º–æ—Ç—Ä:

tail -f bot.log


üõ†Ô∏è –û—Ç–ª–∞–¥–∫–∞



–ü—Ä–æ–±–ª–µ–º–∞
–†–µ—à–µ–Ω–∏–µ



–û—à–∏–±–∫–∞ PostgreSQL
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å: sudo systemctl status postgresql. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ .env.


–û—à–∏–±–∫–∞ Telegram API
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ BOT_TOKEN. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –¥–æ—Å—Ç—É–ø–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.


–ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ bot.log.



üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–î–æ–±–∞–≤—å—Ç–µ —Å–µ—Ä–≤–µ—Ä –≤—Ä—É—á–Ω—É—é:
psql -U monitor_user -d server_monitoring
INSERT INTO servers (user_id, name, address, check_type)
VALUES (123456789, 'Test Server', 'example.com', 'https');


üöÄ –†–∞—Å—à–∏—Ä–µ–Ω–∏—è

–î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –¥—Ä—É–≥–∏—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –≤ services/monitoring.py.
–£–ª—É—á—à–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –≥—Ä–∞—Ñ–∏–∫–∏).
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∞–¥–º–∏–Ω–∞–º–∏.
–°–æ–∑–¥–∞—Ç—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.


üìù –õ–∏—Ü–µ–Ω–∑–∏—è
–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ MIT License. –°–æ–±–ª—é–¥–∞–π—Ç–µ –ª–∏—Ü–µ–Ω–∑–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫ (aiogram, psycopg2, –∏ —Ç.–¥.).

üì¨ –ö–æ–Ω—Ç–∞–∫—Ç—ã

Issues: –°–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.
Telegram: –°–≤—è–∂–∏—Ç–µ—Å—å —Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º.

‚≠ê –ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –ø–æ–ª–µ–∑–µ–Ω, –ø–æ—Å—Ç–∞–≤—å—Ç–µ –∑–≤–µ–∑–¥—É –Ω–∞ GitHub!
